<?php

namespace App\tests\Functional;

use App\Test\CustomApiTestCase;

class CheeseListingResourceTest extends CustomApiTestCase {

    function testCreateCheeseListing()
    {
        $client = self::createClient();
        $client->request('POST', '/api/cheeses', [
            'headers' => ['Content-Type' => 'application/json'],
            'json' => []
        ]);

        $this->createUserAndLogIn($client, 'cheeseplease@example.com', '123');
        $this->assertResponseStatusCodeSame(204);
    }
    
    function testOnlyUserCanLogIn()
    {
        $client = self::createClient();
        $client->request('POST', '/api/cheeses', [
            'headers' => ['Content-Type' => 'application/json'],
            'json' => []
        ]);
        
        $this->logIn($client, 'cheeseplease@example.com', '123');
        $this->assertResponseStatusCodeSame(401);
    }
}

